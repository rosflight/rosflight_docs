
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A lean, open-source autopilot system built by researchers, for researchers">
      
      
        <meta name="author" content="James Jackson, Daniel Koch">
      
      
        <link rel="canonical" href="http://rosflight.org/ROS2/user-guide/flight-controller-setup/">
      
      
        <link rel="prev" href="../hardware-setup/">
      
      
        <link rel="next" href="../rc-configuration/">
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.1.21">
    
    
      
        <title>Flight Controller Setup - ROSflight</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.eebd395e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="red">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#flight-controller-setup" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
You're not viewing the latest version.
<a href="../../..">
  <strong>Click here to go to latest.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ROSflight" class="md-header__button md-logo" aria-label="ROSflight" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROSflight
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Flight Controller Setup
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../overview/" class="md-tabs__link md-tabs__link--active">
        User Guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../developer-guide/contribution-guidelines/" class="md-tabs__link">
        Developer Guide
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ROSflight" class="md-nav__button md-logo" aria-label="ROSflight" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    ROSflight
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          User Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hardware-setup/" class="md-nav__link">
        Hardware Setup
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Flight Controller Setup
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Flight Controller Setup
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compatible-hardware" class="md-nav__link">
    Compatible Hardware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-port-configuration" class="md-nav__link">
    Serial Port Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flashing-firmware-using-the-cleanflight-configurator" class="md-nav__link">
    Flashing Firmware using the Cleanflight Configurator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flashing-firmware-from-the-command-line" class="md-nav__link">
    Flashing Firmware from the Command Line
  </a>
  
    <nav class="md-nav" aria-label="Flashing Firmware from the Command Line">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#f4-boards" class="md-nav__link">
    F4 Boards
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f1-boards" class="md-nav__link">
    F1 Boards
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../rc-configuration/" class="md-nav__link">
        RC Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ros-setup/" class="md-nav__link">
        ROS Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../parameter-configuration/" class="md-nav__link">
        Parameter Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../preflight-checks/" class="md-nav__link">
        Pre-Flight Checks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../performance/" class="md-nav__link">
        Improving Performance
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../gazebo_simulation/" class="md-nav__link">
        Running Gazebo Simulation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../autonomous-flight/" class="md-nav__link">
        Autonomous Flight
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Developer Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Developer Guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/contribution-guidelines/" class="md-nav__link">
        Contribution Guidelines
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/style-guide/" class="md-nav__link">
        Style Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/code-architecture/" class="md-nav__link">
        Code Architecture
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/estimator-algorithm/" class="md-nav__link">
        Estimator Algorithm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/building-flashing/" class="md-nav__link">
        Building and Flashing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/unit-tests/" class="md-nav__link">
        Unit Tests
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/debugging/" class="md-nav__link">
        Using a Debugger
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#compatible-hardware" class="md-nav__link">
    Compatible Hardware
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serial-port-configuration" class="md-nav__link">
    Serial Port Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flashing-firmware-using-the-cleanflight-configurator" class="md-nav__link">
    Flashing Firmware using the Cleanflight Configurator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flashing-firmware-from-the-command-line" class="md-nav__link">
    Flashing Firmware from the Command Line
  </a>
  
    <nav class="md-nav" aria-label="Flashing Firmware from the Command Line">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#f4-boards" class="md-nav__link">
    F4 Boards
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#f1-boards" class="md-nav__link">
    F1 Boards
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/rosflight/rosflight_documentation/edit/ROS2/docs/user-guide/flight-controller-setup.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="flight-controller-setup">Flight Controller Setup<a class="headerlink" href="#flight-controller-setup" title="Permanent link">&para;</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This page contains instructions for flashing pre-built firmware binaries.
For instructions on building and flashing from source, see <a href="../../developer-guide/building-flashing/">Building and Flashing</a> in the Developer Guide.</p>
</div>
<h2 id="compatible-hardware">Compatible Hardware<a class="headerlink" href="#compatible-hardware" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Deprecation Notice</p>
<p>As of June 2019, plans are to deprecate support for the F1 in the near future. If you need to use an F1, you will need to retrieve an older version of the code that supports the F1. However, if there are issues, we will not be able to help you fix them.</p>
</div>
<p>As of January 2018, ROSflight is only supported on flight controllers with STM32F103 and STM32F405 processors, specifically, the Revo, Naze32, and Flip32. Both the 6-DOF and 10-DOF versions of each board are fully supported. We have had the most success with Revo boards purchased from <a href="https://hobbyking.com/en_us/openpilot-cc3d-revolution-revo-32bit-flight-controller-w-integrated-433mhz-oplink.html?___store=en_us">HobbyKing</a>. We have had weird issues with knock-off boards from Chinese vendors. An acro version (IMU-Only) can be found at <a href="https://www.readytoflyquads.com/openpilot-cc3d-revolution-acro">readytoflyquads</a>.</p>
<h2 id="serial-port-configuration">Serial Port Configuration<a class="headerlink" href="#serial-port-configuration" title="Permanent link">&para;</a></h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can see which groups you are a member of by running <code>groups $USER</code> on the command line.</p>
</div>
<p>The following bullet point is necessary:</p>
<ul>
<li>Be sure your user is in the <code>dialout</code> and <code>plugdev</code> groups so you have access to the serial ports. You will need to log out and back in for these changes to take effect.
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>dialout,plugdev<span class="w"> </span><span class="nv">$USER</span>
</code></pre></div></li>
</ul>
<p>If you experience issues, you may need one or both of the next two bullet points:</p>
<ul>
<li>
<p>Temporarily stop the modem-manager (Sometimes, Linux thinks the device is a modem -- this command will be effective until next boot, or until you run the command again with <code>start</code> in place of <code>stop</code>)
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>ModemManager.service
</code></pre></div></p>
</li>
<li>
<p>Add the custom udev rule so Linux handles the flight controller properly (copy the following as <code>/etc/udev/rules.d/45-stm32dfu.rules</code>)
<div class="highlight"><pre><span></span><code><span class="c1"># DFU (Internal bootloader for STM32 MCUs)</span>
<span class="nv">SUBSYSTEM</span><span class="o">==</span><span class="s2">&quot;usb&quot;</span>,<span class="w"> </span>ATTRS<span class="o">{</span>idVendor<span class="o">}==</span><span class="s2">&quot;0483&quot;</span>,<span class="w"> </span>ATTRS<span class="o">{</span>idProduct<span class="o">}==</span><span class="s2">&quot;df11&quot;</span>,<span class="w"> </span><span class="nv">MODE</span><span class="o">=</span><span class="s2">&quot;0664&quot;</span>,<span class="w"> </span><span class="nv">GROUP</span><span class="o">=</span><span class="s2">&quot;plugdev&quot;</span>
</code></pre></div></p>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can permanently disable the ModemManager if you do not need it, then you won't have to disable it every time you reboot:
<div class="highlight"><pre><span></span><code>sudo systemctl disable ModemManager.service
</code></pre></div>
Replace <code>disable</code> with <code>enable</code> to revert (i.e. if you find some other program you use needs access to it).
Or you can uninstall it entirely from your system:
<div class="highlight"><pre><span></span><code>sudo apt purge modemmanager
</code></pre></div></p>
</div>
<h2 id="flashing-firmware-using-the-cleanflight-configurator">Flashing Firmware using the Cleanflight Configurator<a class="headerlink" href="#flashing-firmware-using-the-cleanflight-configurator" title="Permanent link">&para;</a></h2>
<ul>
<li>Download the latest version of ROSflight for your board <a href="https://github.com/rosflight/firmware/releases">here</a>.</li>
<li>
<p>Install the Cleanflight configurator - It is an extension to Google Chrome - <a href="https://chrome.google.com/webstore/detail/cleanflight-configurator/enacoimjcgeinfnnnpajinjgmkahmfgb?hl=en">link</a></p>
</li>
<li>
<p>Load the firmware, and flash using cleanflight configurator</p>
<ul>
<li>Open the configurator</li>
<li>Open firmware flasher</li>
<li>Connect your flight controller</li>
<li>Make sure that you have selected the right port (or DFU in the case of F4-based boards)</li>
<li>Select "Load Firmware (Local)"</li>
<li>Select your *.hex file you downloaded earlier.</li>
<li>Short the boot pins on your flight controller, unplug it, and and plug back in.</li>
</ul>
</li>
</ul>
<p><img alt="cleanflight_gui_1" src="../images/cleanflight_configurator-1.png" /></p>
<ul>
<li>If you scroll to the bottom of the screen, you will see the green bar indicate progress as the hex is flashed to the flight controller. You should then see something like the following:</li>
</ul>
<p><img alt="success" src="../images/sucessful_flash.png" /></p>
<ul>
<li>You're done! Great job.</li>
</ul>
<h2 id="flashing-firmware-from-the-command-line">Flashing Firmware from the Command Line<a class="headerlink" href="#flashing-firmware-from-the-command-line" title="Permanent link">&para;</a></h2>
<h3 id="f4-boards">F4 Boards<a class="headerlink" href="#f4-boards" title="Permanent link">&para;</a></h3>
<p>You can use dfu-util to flash the firmware. This is helpful if you need (or prefer) a command-line interface.</p>
<ul>
<li>Install the dfu-util utility</li>
</ul>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>dfu-util
</code></pre></div>
<ul>
<li>Download the latest rosflight-F4.bin file, <a href="https://github.com/rosflight/firmware/releases">found here</a></li>
<li>Put the board in bootloader mode (short the boot pins while restarting the board by cycling power)</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>dfu-util auto-detects F4-based boards. Try <code>dfu-util -l</code> to make sure your board is in bootloader mode</p>
</div>
<ul>
<li>Flash the firmware to the device
<div class="highlight"><pre><span></span><code><span class="w">    </span>dfu-util<span class="w"> </span>-a<span class="w"> </span><span class="m">0</span><span class="w"> </span>-s<span class="w"> </span>0x08000000<span class="w"> </span>-D<span class="w"> </span>rosflight-F4.bin
</code></pre></div></li>
</ul>
<h3 id="f1-boards">F1 Boards<a class="headerlink" href="#f1-boards" title="Permanent link">&para;</a></h3>
<p>You can use stm32flash to flash the firmware to F1-based boards.</p>
<ul>
<li>Install the stm32flash utility
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>stm32flash
</code></pre></div></li>
<li>Download the latest rosflight.hex file, <a href="https://github.com/rosflight/firmware/releases">found here</a>, to the current directory</li>
<li>
<p>Put the board in bootloader mode (short boot pins while restarting the Naze by cycling power)</p>
</li>
<li>
<p>Flash the firmware to the proper device (replace <code>/dev/ttyUSB0</code>)
<div class="highlight"><pre><span></span><code><span class="w">    </span>stm32flash<span class="w"> </span>-w<span class="w"> </span>rosflight.hex<span class="w"> </span>-v<span class="w"> </span>-g<span class="w"> </span>0x0<span class="w"> </span>-b<span class="w"> </span><span class="m">921600</span><span class="w"> </span>/dev/ttyUSB0
</code></pre></div></p>
</li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019, James Jackson and Daniel Koch, BYU MAGICC Lab
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.74e28a9f.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.220ee61c.min.js"></script>
      
        
          <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
      
    
  </body>
</html>