
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A lean, open-source autopilot system built by researchers, for researchers">
      
      
        <meta name="author" content="James Jackson, Daniel Koch, Ian Reid, Brandon Sutherland">
      
      
        <link rel="canonical" href="http://rosflight.org/git-main/user-guide/rosplane-setup/">
      
      
        <link rel="prev" href="../autonomous-flight/">
      
      
        <link rel="next" href="../roscopter-setup/">
      
      
      <link rel="icon" href="../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>ROSplane Setup - ROSflight</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rosplane-setup" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
You're not viewing the latest stable version.
<a href="../../..">
  <strong>Click here to go to latest.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ROSflight" class="md-header__button md-logo" aria-label="ROSflight" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROSflight
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ROSplane Setup
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../overview/" class="md-tabs__link">
          
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../developer-guide/contribution-guidelines/" class="md-tabs__link">
          
  
  Developer Guide

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ROSflight" class="md-nav__button md-logo" aria-label="ROSflight" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    ROSflight
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../hardware-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flight-controller-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flight Controller Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rc-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RC Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ros2-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROS2 Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parameter-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parameter Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../preflight-checks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pre-Flight Checks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../improving-firmware-performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Improving Firmware Performance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../autonomous-flight/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autonomous Flight
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    ROSplane Setup
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ROSplane Setup
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-rosplane-sil" class="md-nav__link">
    <span class="md-ellipsis">
      Running ROSplane SIL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running ROSplane SIL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#launching" class="md-nav__link">
    <span class="md-ellipsis">
      Launching
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Launching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-method" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-method" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Additional Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-method_1" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-method_1" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flying-in-sim" class="md-nav__link">
    <span class="md-ellipsis">
      Flying in Sim
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-rosplane-on-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      Running ROSplane on Hardware
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flying-waypoint-missions-in-sim-and-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      Flying Waypoint Missions (in sim and hardware)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flying Waypoint Missions (in sim and hardware)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-waypoints" class="md-nav__link">
    <span class="md-ellipsis">
      Adding waypoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding waypoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-method_2" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-method_2" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishing-waypoints" class="md-nav__link">
    <span class="md-ellipsis">
      Publishing Waypoints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../roscopter-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ROScopter Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../running-gazebo-simulation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Running Gazebo Simulation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/contribution-guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribution Guidelines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/style-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Style Guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Firmware
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Firmware
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/firmware/code-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/firmware/building-and-flashing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building and Flashing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/firmware/unit-tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Unit Tests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/firmware/debugging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debugging
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ROSplane
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            ROSplane
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_1" >
        
          
          <label class="md-nav__link" for="__nav_3_4_1" id="__nav_3_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Controller
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_1">
            <span class="md-nav__icon md-icon"></span>
            Controller
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/controller/controller-general-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General Controller Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/controller/controller-software-architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Controller Software Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/controller/controller-base/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Controller Base
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/controller/controller-state-machine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Controller State Machine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/controller/controller-outline/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Successive Loop Closure Controller Outline
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/controller/controller-total-energy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Total Energy Controller
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/parameter-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parameter Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_3" >
        
          
          <label class="md-nav__link" for="__nav_3_4_3" id="__nav_3_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Path Planning
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_3">
            <span class="md-nav__icon md-icon"></span>
            Path Planning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/path-planning/path-planning-overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Path Planning Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/path-planning/path-planner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Path Planner
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/path-planning/path-manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Path Manager
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer-guide/rosplane/path-planning/path-follower/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Path Follower
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    <span class="md-ellipsis">
      Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-rosplane-sil" class="md-nav__link">
    <span class="md-ellipsis">
      Running ROSplane SIL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running ROSplane SIL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#launching" class="md-nav__link">
    <span class="md-ellipsis">
      Launching
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Launching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-method" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-method" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#additional-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Setup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Additional Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-method_1" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-method_1" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flying-in-sim" class="md-nav__link">
    <span class="md-ellipsis">
      Flying in Sim
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-rosplane-on-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      Running ROSplane on Hardware
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flying-waypoint-missions-in-sim-and-hardware" class="md-nav__link">
    <span class="md-ellipsis">
      Flying Waypoint Missions (in sim and hardware)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Flying Waypoint Missions (in sim and hardware)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-waypoints" class="md-nav__link">
    <span class="md-ellipsis">
      Adding waypoints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Adding waypoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-method_2" class="md-nav__link">
    <span class="md-ellipsis">
      Recommended Method
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alternative-method_2" class="md-nav__link">
    <span class="md-ellipsis">
      Alternative Method
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishing-waypoints" class="md-nav__link">
    <span class="md-ellipsis">
      Publishing Waypoints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/rosflight/rosflight_docs/edit/main/docs/user-guide/rosplane-setup.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="rosplane-setup">ROSplane Setup<a class="headerlink" href="#rosplane-setup" title="Permanent link">&para;</a></h1>
<p>ROSplane v2.0.0-beta is now available! Check the <a href="https://github.com/rosflight/rosplane">github repo</a> for the latest instructions.</p>
<p>ROSplane is a basic fixed-wing autopilot build around ROS2 for use with the ROSflight autopilot.
It is built according to the methods published in <em>Small Unmanned Aircraft: Theory and Practice</em> by Dr. Randy Beard and Dr. Tim McLain.</p>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h2>
<p>ROSplane requires a working ROS2 installation on a companion computer.
ROSplane will most often be used in conjunction with the ROSflight firmware and the firmware interface (aka <code>rosflight_ros_pkgs</code>).</p>
<p>Follow the instructions on <a href="../ros2-setup/">ROS2 Setup</a> to install and set up ROS2 and <code>rosflight_ros_pkgs</code>.</p>
<h2 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h2>
<p>You will need to install ROSplane on the companion computer.</p>
<p>First, navigate to the src directory of the ROS2 workspace and clone the git repository:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/path/to/rosflight_ws/src
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/rosflight/rosplane.git
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Your <code>rosflight_ws</code> file structure should now look like:
<div class="highlight"><pre><span></span><code>rosflight_ws
  └── src 
    ├── rosflight_ros_pkgs
    └── rosplane 
</code></pre></div></p>
</div>
<p>Then navigate to the top of the <code>rosflight_ws</code> directory and build:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>..
colcon<span class="w"> </span>build
</code></pre></div>
<p>Next, source the <code>rosflight_ws</code> install files.
If you already added the source command to your <code>.bashrc</code> from the <a href="../ros2-setup/">ROS2 Setup</a> page, then you can skip this step.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># source the install file</span>
<span class="nb">source</span><span class="w"> </span>install/setup.bash

<span class="c1"># add it to your .bashrc</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;source install/setup.bash &gt;&gt; </span><span class="nv">$HOME</span><span class="s2">/.bashrc&quot;</span>
</code></pre></div>
<p>Note that sourcing the <code>setup.bash</code> file in the <code>rosflight_ws</code> directory will install all ROS2 packages in any subdirectories.</p>
<h2 id="running-rosplane-sil">Running ROSplane SIL<a class="headerlink" href="#running-rosplane-sil" title="Permanent link">&para;</a></h2>
<p>A controller or a simulated controller can be used to fly the aircraft in simulation.
See the <code>README.md</code> file for the <code>rosflight_ros_pkgs</code> package for more information on RC controll in simulation.</p>
<h3 id="launching">Launching<a class="headerlink" href="#launching" title="Permanent link">&para;</a></h3>
<h4 id="recommended-method">Recommended Method<a class="headerlink" href="#recommended-method" title="Permanent link">&para;</a></h4>
<p>A convenience bash script has been included that uses tmux to launch Gazebo, an instance of the ROSflight firmware, and ROSplane.
Note that this requires tmux, so you may need to install it with <code>sudo apt install tmux</code>.
Run
<div class="highlight"><pre><span></span><code>./src/rosplane/rosplane/scripts/rosplane_gcs_launch.sh
</code></pre></div>
from the <code>rosflight_ws</code> directory.
Note that the script needs options specified, so it will fail.
However,it will print out the required configuration options.
See the script for more information.</p>
<h4 id="alternative-method">Alternative Method<a class="headerlink" href="#alternative-method" title="Permanent link">&para;</a></h4>
<p>Alternatively, you can run each of the commands in the bash script individually:
<div class="highlight"><pre><span></span><code><span class="c1"># Terminal 1 - Launches Gazebo and a simulated instance of the firmware</span>
ros2<span class="w"> </span>launch<span class="w"> </span>rosflight_sim<span class="w"> </span>fixedwing.launch.py

<span class="c1"># Terminal 2 - Runs rosflight_io configured for SIL to interface with the firmware</span>
ros2<span class="w"> </span>run<span class="w"> </span>rosflight_io<span class="w"> </span>rosflight_io<span class="w"> </span>--ros-args<span class="w"> </span>-p<span class="w"> </span>udp:<span class="o">=</span><span class="nb">true</span>

<span class="c1"># Terminal 3 - Launches rosplane with the Anaconda aerodynamic coefficients</span>
ros2<span class="w"> </span>launch<span class="w"> </span>rosplane_sim<span class="w"> </span>sim.launch.py<span class="w"> </span>aircraft:<span class="o">=</span>anaconda
</code></pre></div></p>
<p>You can also replace the first two commands above with the convenience launch file that does both:
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>rosflight_sim<span class="w"> </span>fixedwing_sim_io_joy.launch.py<span class="w"> </span>aircraft:<span class="o">=</span>anaconda
</code></pre></div>
Remember to launch ROSplane if you use this method.</p>
<h3 id="additional-setup">Additional Setup<a class="headerlink" href="#additional-setup" title="Permanent link">&para;</a></h3>
<h4 id="recommended-method_1">Recommended Method<a class="headerlink" href="#recommended-method_1" title="Permanent link">&para;</a></h4>
<p>If this is your first time launching ROSplane, make sure to run the convenience launch script to initialize the firmware parameters and calibrate the IMU.
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>rosflight_sim<span class="w"> </span>fixedwing_init_firmware.launch.py
</code></pre></div></p>
<h4 id="alternative-method_1">Alternative Method<a class="headerlink" href="#alternative-method_1" title="Permanent link">&para;</a></h4>
<p>Alternatively, you can run the following commands to initialize firmware parameters and calibrate the IMU.
Firmware parameters should first be loaded using
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/param_load_from_file<span class="w"> </span>rosflight_msgs/srv/ParamFile<span class="w"> </span><span class="s2">&quot;filename: /path/to/rosflight_ws/src/rosflight_ros_pkgs/rosflight_sim/params/fixedwing_firmware.yaml&quot;</span>
</code></pre></div></p>
<p>The IMU should then be calibrated to remove the random biases generated at startup.
Note that the random number generator used to create these biases is seeded with a constant value, so this calibration should only need to be performed once.
See the code to change the way these biases are calculated.
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/calibrate_imu<span class="w"> </span>std_srvs/srv/Trigger
</code></pre></div></p>
<p>After calibrating, write the parameters to a file using:
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/param_write<span class="w"> </span>std_srvs/srv/Trigger
</code></pre></div>
This command will create a directory named <code>rosflight_memory</code> where the parameters are written.
The ROSflight firmware will automatically check if the <code>rosflight_memory</code> directory is present when launched and will use those parameters if available.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ROSflight firmware will only look for the <code>rosflight_memory</code> directory in the directory where the launch command is run.
You must launch <code>rosflight_sim</code> in the same directory to use the saved parameters; otherwise, reload and re-write the parameters.</p>
</div>
<h3 id="flying-in-sim">Flying in Sim<a class="headerlink" href="#flying-in-sim" title="Permanent link">&para;</a></h3>
<p>Once you have the simulation booted up, use channel 4 of a connected transmitter to arm.
If you are using a simulated transmitter, use <code>ros2 service call /toggle_arm std_srvs/srv/Trigger</code> to toggle arm/disarm.</p>
<p>After arming, the plane will operate under RC control.
Verify that the commands are working and that the aircraft is responding as expected.</p>
<p>To fly autonomously, use channel 5 to disable RC override.
If using a simulated transmitter, use <code>ros2 service call /toggle_override std_srvs/srv/Trigger</code> to toggle RC override on/off.</p>
<p>The plane should then take off or fly autonomously in the Gazebo simulator!</p>
<h2 id="running-rosplane-on-hardware">Running ROSplane on Hardware<a class="headerlink" href="#running-rosplane-on-hardware" title="Permanent link">&para;</a></h2>
<p>Ensure <code>rosflight_io</code> is running on the companion computer, and that the flight controller is connects to the companion computer.</p>
<p>Launch ROSplane using
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>rosplane<span class="w"> </span>rosplane.launch.py
</code></pre></div></p>
<p>Arm the aircraft using channel 4 of the safety RC transmitter.
When ready to let ROSplane take control, use channel 5 of the RC transmitter to disable RC override.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Disabling RC override on hardware will turn control over to ROSplane.
A safety pilot should <strong><em>always</em></strong> be ready to take control, especially when running untested code.</p>
</div>
<h2 id="flying-waypoint-missions-in-sim-and-hardware">Flying Waypoint Missions (in sim and hardware)<a class="headerlink" href="#flying-waypoint-missions-in-sim-and-hardware" title="Permanent link">&para;</a></h2>
<p>Autonomous waypoint missions can easily be flown using ROSplane.
The waypoints of a mission are controlled by the <code>path_planner</code> node.
These waypoints are sent to the <code>path_manager</code> node.
Low level path-following is done by the <code>path_follower</code> node.
See "Small Unmanned Aircraft: Theory and Practice" by Dr. Randy Beard and Dr. Tim McLain for more information on the architecture.
See <a href="../../developer-guide/rosplane/path-planning/path-planning-overview/">Path Planning</a> for more information on how to use and tune the path planner, manager, and follower.</p>
<h3 id="adding-waypoints">Adding waypoints<a class="headerlink" href="#adding-waypoints" title="Permanent link">&para;</a></h3>
<h4 id="recommended-method_2">Recommended Method<a class="headerlink" href="#recommended-method_2" title="Permanent link">&para;</a></h4>
<p>ROSplane initializes with no waypoints added to the <code>path_planner</code>.
We recommend using a mission .yaml file (an example mission can be found in <code>rosplane/params/fixedwing_mission.yaml</code>).
Loading the mission can be done using </p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/load_mission_from_file<span class="w"> </span>rosflight_msgs/srv/ParamFile<span class="w"> </span><span class="s2">&quot;{filename: &lt;FILENAME&gt;}&quot;</span>
</code></pre></div>
<p>where <code>FILENAME</code> is the absolute path to the mission .yaml file.
Note that the origin (0,0,0) is placed at the GNSS location where ROSplane was initialized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All waypoints must include a valid <code>[X, Y, Z]</code>, <code>va_d</code>, and <code>lla</code> values.</p>
</div>
<h4 id="alternative-method_2">Alternative Method<a class="headerlink" href="#alternative-method_2" title="Permanent link">&para;</a></h4>
<p>Alternatively, you can add a waypoint one at a time by calling the appropriate service</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/add_waypoint<span class="w"> </span>rosplane_msgs/srv/AddWaypoint<span class="w"> </span><span class="s2">&quot;{w: [X, Y, Z], chi_d: CHI_D, lla: USE_LLA, use_chi: USE_CHI, va_d: VA_D}&quot;</span>
</code></pre></div>
<p>where <code>[X, Y, Z]</code> is the NED position of the waypoint from the origin (in meters) OR the GNSS location of the waypoint (LLA), <code>CHI_D</code> is the desired heading at the waypoint, and <code>VA_D</code> is the airspeed at the waypoint.
Set the <code>lla</code> field to <code>true</code> if the waypoint <code>[X, Y, Z]</code> field is given in GNSS coordinates and <code>false</code> if given in NED coordinates.
Corners in the path are controlled by <code>USE_CHI</code>, where a value of <code>True</code> will cause ROSplane to use a Dubins path planner and a value of <code>False</code> will cause a fillet path planner to be used.
Adding waypoints can be done at any time, even after loading from a file.</p>
<p>Clearing waypoints can be done using 
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/clear_waypoints<span class="w"> </span>std_msgs/srv/Trigger
</code></pre></div></p>
<h3 id="publishing-waypoints">Publishing Waypoints<a class="headerlink" href="#publishing-waypoints" title="Permanent link">&para;</a></h3>
<p>The <code>path_planner</code> node automatically publishes a small number of waypoints (default is 3) at the beginning of this mission.
This number is controlled by the <code>num_waypoints_to_publish_at_start</code> ROS2 parameter. </p>
<p>Additional waypoints can be published using 
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/publish_next_waypoint<span class="w"> </span>std_srvs/srv/Trigger
</code></pre></div></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2019, James Jackson and Daniel Koch, BYU MAGICC Lab
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "navigation.tabs"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  </body>
</html>