<!DOCTYPE html><html lang="en" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A lean, open-source autopilot system built by researchers, for researchers">
      
      
        <meta name="author" content="James Jackson, Daniel Koch, Ian Reid, Brandon Sutherland, Jacob Moore">
      
      
        <link rel="canonical" href="http://rosflight.org/git-main/user-guide/tutorials/setting-up-roscopter-in-sim/">
      
      
        <link rel="prev" href="../manually-flying-rosflight-sim/">
      
      
        <link rel="next" href="../setting-up-rosplane-in-sim/">
      
      
      <link rel="icon" href="../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Running ROScopter in Sim - ROSflight</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#setting-up-roscopter-in-sim" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
You're not viewing the latest stable version.
<a href="../../../..">
  <strong>Click here to go to latest.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="ROSflight" class="md-header__button md-logo" aria-label="ROSflight" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ROSflight
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Running ROScopter in Sim
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../overview/" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../developer-guide/contribution-guidelines/" class="md-tabs__link">
          
  
  
  Developer Guide

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="ROSflight" class="md-nav__button md-logo" aria-label="ROSflight" data-md-component="logo">
      
  <img src="../../../assets/logo.png" alt="logo">

    </a>
    ROSflight
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2">
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/installation-sim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation for Sim
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/installation-hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation on Hardware
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/using-docker-with-rosflight/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Docker with ROSflight
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setting-up-rosflight-sim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setting up ROSflight Sim
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manually-flying-rosflight-sim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manually flying ROSflight Sim
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Running ROScopter in Sim
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Running ROScopter in Sim
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#roscopter-overview" class="md-nav__link">
    <span class="md-ellipsis">
      ROScopter Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ROScopter Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#major-system-components" class="md-nav__link">
    <span class="md-ellipsis">
      Major System Components
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      Control Hierarchy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#launching-standalone_sim" class="md-nav__link">
    <span class="md-ellipsis">
      Launching standalone_sim
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#launching-roscopter-autonomy-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Launching ROScopter Autonomy Stack
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Launching ROScopter Autonomy Stack">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-roscopter-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the ROScopter Stack
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-ground-control-station" class="md-nav__link">
    <span class="md-ellipsis">
      Launch Ground Control Station
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-missions" class="md-nav__link">
    <span class="md-ellipsis">
      Loading Missions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Loading Missions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-waypoint-files" class="md-nav__link">
    <span class="md-ellipsis">
      Using Waypoint Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-waypoints-manually" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Waypoints Manually
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-mission-loading" class="md-nav__link">
    <span class="md-ellipsis">
      Verify Mission Loading
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishing-additional-waypoints" class="md-nav__link">
    <span class="md-ellipsis">
      Publishing Additional Waypoints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-autonomous-flight" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Autonomous Flight
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enabling Autonomous Flight">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arm-and-start-mission" class="md-nav__link">
    <span class="md-ellipsis">
      Arm and Start Mission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor-flight-progress" class="md-nav__link">
    <span class="md-ellipsis">
      Monitor Flight Progress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning-flight-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Tuning Flight Performance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review" class="md-nav__link">
    <span class="md-ellipsis">
      Review
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Next Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setting-up-rosplane-in-sim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running ROSplane in Sim
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tuning-performance-in-sim/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tuning performance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../transitioning-from-sim-to-hardware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transitioning from Sim to Hardware
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4">
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Concepts
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_1">
        
          
          <label class="md-nav__link" for="__nav_2_4_1" id="__nav_2_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Hardware and ROSflight
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_1">
            <span class="md-nav__icon md-icon"></span>
            Hardware and ROSflight
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/hardware-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Hardware Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/flight-controller-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Flight Controller Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/rc-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RC Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/parameter-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parameter Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/preflight-checks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pre-Flight Checks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/improving-firmware-performance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Improving Firmware Performance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/autonomous-flight/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Autonomous Flight
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2">
        
          
          <label class="md-nav__link" for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ROSflight Sim
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_2">
            <span class="md-nav__icon md-icon"></span>
            ROSflight Sim
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/running-simulations-with-rosflight/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ROSflight Sim Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/detailed-launching-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Detailed Launching Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/simulator-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simulator Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3">
        
          
          <label class="md-nav__link" for="__nav_2_4_3" id="__nav_2_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ROSplane
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_3">
            <span class="md-nav__icon md-icon"></span>
            ROSplane
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/rosplane-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ROSplane Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/rosplane-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ROSplane Setup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_4">
        
          
          <label class="md-nav__link" for="__nav_2_4_4" id="__nav_2_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ROScopter
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4_4">
            <span class="md-nav__icon md-icon"></span>
            ROScopter
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/roscopter-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ROScopter Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/roscopter-setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ROScopter Setup
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/contribution-guidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contribution Guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/style-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Style Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3">
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Firmware
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Firmware
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/firmware/code-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/firmware/building-and-flashing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building and Flashing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/firmware/unit-tests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Unit Tests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/firmware/debugging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debugging
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4">
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    ROSplane
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            ROSplane
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/rosplane-dev-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer Guide Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_2">
        
          
          <label class="md-nav__link" for="__nav_3_4_2" id="__nav_3_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Controller
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_2">
            <span class="md-nav__icon md-icon"></span>
            Controller
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/controller/controller-general-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    General Controller Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/controller/controller-software-architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Controller Software Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/controller/controller-base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Controller Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/controller/controller-state-machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Controller State Machine
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/controller/controller-outline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Successive Loop Closure Controller Outline
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/controller/controller-total-energy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Total Energy Controller
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_3">
        
          
          <label class="md-nav__link" for="__nav_3_4_3" id="__nav_3_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Estimator
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_3">
            <span class="md-nav__icon md-icon"></span>
            Estimator
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/estimator/estimator-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Estimator Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/estimator/estimator-base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Estimator Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/estimator/estimator-example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Estimator Example
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/parameter-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Parameter Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_5">
        
          
          <label class="md-nav__link" for="__nav_3_4_5" id="__nav_3_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Navigation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_5">
            <span class="md-nav__icon md-icon"></span>
            Navigation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/navigation/navigation-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Navigation Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/navigation/path-planner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Path Planner
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/navigation/path-manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Path Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../developer-guide/rosplane/navigation/path-follower/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Path Follower
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#roscopter-overview" class="md-nav__link">
    <span class="md-ellipsis">
      ROScopter Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ROScopter Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#major-system-components" class="md-nav__link">
    <span class="md-ellipsis">
      Major System Components
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#control-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      Control Hierarchy
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#launching-standalone_sim" class="md-nav__link">
    <span class="md-ellipsis">
      Launching standalone_sim
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#launching-roscopter-autonomy-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Launching ROScopter Autonomy Stack
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Launching ROScopter Autonomy Stack">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-roscopter-stack" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the ROScopter Stack
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#launch-ground-control-station" class="md-nav__link">
    <span class="md-ellipsis">
      Launch Ground Control Station
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#loading-missions" class="md-nav__link">
    <span class="md-ellipsis">
      Loading Missions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Loading Missions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-waypoint-files" class="md-nav__link">
    <span class="md-ellipsis">
      Using Waypoint Files
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setting-waypoints-manually" class="md-nav__link">
    <span class="md-ellipsis">
      Setting Waypoints Manually
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verify-mission-loading" class="md-nav__link">
    <span class="md-ellipsis">
      Verify Mission Loading
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#publishing-additional-waypoints" class="md-nav__link">
    <span class="md-ellipsis">
      Publishing Additional Waypoints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-autonomous-flight" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Autonomous Flight
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enabling Autonomous Flight">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#arm-and-start-mission" class="md-nav__link">
    <span class="md-ellipsis">
      Arm and Start Mission
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitor-flight-progress" class="md-nav__link">
    <span class="md-ellipsis">
      Monitor Flight Progress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning-flight-performance" class="md-nav__link">
    <span class="md-ellipsis">
      Tuning Flight Performance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#review" class="md-nav__link">
    <span class="md-ellipsis">
      Review
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Next Steps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/rosflight/rosflight_docs/edit/main/docs/user-guide/tutorials/setting-up-roscopter-in-sim.md" title="Edit this page" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
    </a>
  
  


<h1 id="setting-up-roscopter-in-sim">Setting up ROScopter in Sim<a class="headerlink" href="#setting-up-roscopter-in-sim" title="Permanent link">¶</a></h1>
<p>This tutorial guides you through setting up ROScopter, the multirotor autopilot system, in simulation.
ROScopter provides basic autonomous flight capabilities for multirotor vehicles.</p>
<p>This tutorial will walk you through:</p>
<ul>
<li>Launching the <code>roscopter</code> autonomy stack</li>
<li>Flying waypoint missions</li>
<li>Some basic analysis of what is going on</li>
</ul>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">¶</a></h2>
<ul>
<li><a href="../manually-flying-rosflight-sim/">Manually flying in ROSflight Sim</a> </li>
</ul>
<h2 id="roscopter-overview">ROScopter Overview<a class="headerlink" href="#roscopter-overview" title="Permanent link">¶</a></h2>
<p>ROScopter is a ROS2-based autopilot system designed for multirotor vehicles.</p>
<h3 id="major-system-components">Major System Components<a class="headerlink" href="#major-system-components" title="Permanent link">¶</a></h3>
<ul>
<li><strong>Estimator</strong>: EKF for state estimation</li>
<li><strong>Controller</strong>: Cascading PID controller with multiple control modes</li>
<li><strong>Trajectory Follower</strong>: Trajectory tracking between waypoints (like a path follower)</li>
<li><strong>Path Manager</strong>: Waypoint following and trajectory management</li>
<li><strong>Path Planner</strong>: High-level mission planning and execution</li>
</ul>
<h3 id="control-hierarchy">Control Hierarchy<a class="headerlink" href="#control-hierarchy" title="Permanent link">¶</a></h3>
<p>The ROScopter controller is designed so that uses can interface with it at a variety of levels.
See the <code>roscopter_msgs/msg/ControllerCommand</code> message definition for more information.</p>
<details class="tip">
<summary>Tip</summary>
<p>Use <code>ros2 interface show roscopter_msgs/msg/ControllerCommand</code> to see the message definition.</p>
</details>
<h2 id="launching-standalone_sim">Launching <code>standalone_sim</code><a class="headerlink" href="#launching-standalone_sim" title="Permanent link">¶</a></h2>
<p>The standalone simulator provides a lightweight simulation environment using RViz for visualization.
This is the recommended starting point for ROScopter simulation.</p>
<p>Launch the multirotor simulation:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Start the standalone simulator with ROSflight firmware simulation</span>
ros2<span class="w"> </span>launch<span class="w"> </span>rosflight_sim<span class="w"> </span>multirotor_standalone.launch.py<span class="w"> </span>use_vimfly:<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<p>The RViz simulation environment should launch.</p>
<p>See the <a href="../manually-flying-rosflight-sim/">manually flying guide</a> for instructions on launching, configuring, and arming in sim.</p>
<h2 id="launching-roscopter-autonomy-stack">Launching ROScopter Autonomy Stack<a class="headerlink" href="#launching-roscopter-autonomy-stack" title="Permanent link">¶</a></h2>
<p>The ROScopter autonomy stack is a collection of ROS2 nodes that provide autonomous flight capabilities on top of the basic simulation.</p>
<p>In a new terminal, run:</p>
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>launch<span class="w"> </span>roscopter_sim<span class="w"> </span>sim.launch.py
</code></pre></div>
<p>This launch file does 2 things:</p>
<ol>
<li>Launches <code>roscopter</code> autonomy stack by calling the <code>roscopter.launch.py</code> file.
This file launches most of the nodes we'll explore later.</li>
<li>Starts the <code>sim_state_transcriber</code> node.
This node publishes the truth state from the simulation as a <code>roscotper/msg/State</code> message so we can easily compare estimated and true state.</li>
</ol>
<h3 id="understanding-the-roscopter-stack">Understanding the ROScopter Stack<a class="headerlink" href="#understanding-the-roscopter-stack" title="Permanent link">¶</a></h3>
<p>Let's take a look at the nodes that we just ran:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Check ROScopter-specific nodes</span>
ros2<span class="w"> </span>node<span class="w"> </span>list
</code></pre></div>
<p>You should see the following output:
</p><div class="highlight"><pre><span></span><code>➜<span class="w">  </span>~<span class="w"> </span>ros2<span class="w"> </span>node<span class="w"> </span>list
/autopilot
/estimator
/external_attitude_transcriber
/path_manager
/path_planner
/roscopter_truth
/trajectory_follower
</code></pre></div><p></p>
<details class="info">
<summary><strong>Node Descriptions</strong></summary>
<ul>
<li><strong><code>/autopilot</code></strong>: Main controller node that implements cascading PID control loops (position → velocity → attitude → rate) and manages flight modes</li>
<li><strong><code>/estimator</code></strong>: EKF that fuses IMU, GPS, and barometer data to provide state estimation (position, velocity, attitude)</li>
<li><strong><code>/external_attitude_transcriber</code></strong>: Converts external attitude references from the estimator to <code>external_attitude</code> messages that are sent to the firmware estimator (helps the firmware estimator not drift)</li>
<li><strong><code>/path_manager</code></strong>: Manages waypoint sequences and generates smooth trajectory segments between waypoints</li>
<li><strong><code>/path_planner</code></strong>: High-level mission planning node that handles waypoint loading</li>
<li><strong><code>/roscopter_truth</code></strong>: Simulation truth state publisher that provides ground truth data for comparison with estimated state</li>
<li><strong><code>/trajectory_follower</code></strong>: Tracks generated trajectory segments and outputs position/velocity commands to the autopilot</li>
</ul>
</details>
<p>Let's now take a look at the topics specific to <code>roscopter</code>:
</p><div class="highlight"><pre><span></span><code><span class="c1"># Check ROScopter-specific topics</span>
ros2<span class="w"> </span>topic<span class="w"> </span>list
</code></pre></div><p></p>
<p>You should see the following output (note that these are topics from only the <code>roscopter</code> launch file):
</p><div class="highlight"><pre><span></span><code>➜<span class="w">  </span>~<span class="w"> </span>ros2<span class="w"> </span>topic<span class="w"> </span>list
/baro
/command
/estimated_state
/external_attitude
/gnss
/high_level_command
/imu/data
/magnetometer
/parameter_events
/rosout
/sim/roscopter/state
/sim/truth_state
/sim/wind_truth
/status
/trajectory_command
/waypoints
</code></pre></div><p></p>
<details class="info">
<summary><strong>Some Key Topic Descriptions</strong></summary>
<ul>
<li>Messages that the <code>estimator</code> subscribes to:<ul>
<li><strong><code>/baro</code></strong>: Barometric pressure sensor data for altitude estimation</li>
<li><strong><code>/gnss</code></strong>: GPS position and velocity measurements</li>
<li><strong><code>/imu/data</code></strong>: IMU sensor data (accelerometer, gyroscope measurements)</li>
<li><strong><code>/magnetometer</code></strong>: Magnetometer readings for heading estimation</li>
</ul>
</li>
<li><strong><code>/command</code></strong>: Commands sent to ROSflight firmware (see rosflight_msgs/msg/Command for details)</li>
<li><strong><code>/estimated_state</code></strong>: Complete vehicle state from EKF (position, velocity, attitude, angular rates)</li>
<li><strong><code>/external_attitude</code></strong>: External attitude reference sent to firmware estimator to prevent drift</li>
<li><strong><code>/high_level_command</code></strong>: High-level control commands from <code>trajectory_follower</code> to <code>autopilot</code></li>
<li><strong><code>/sim/roscopter/state</code></strong>: ROScopter-formatted state message from simulation truth</li>
<li><strong><code>/trajectory_command</code></strong>: Trajectory commands from path manager to trajectory follower</li>
<li><strong><code>/waypoints</code></strong>: Current waypoint list and mission information</li>
</ul>
</details>
<p>When we fly waypoint missions, we will load waypoints to the <code>path_planner</code> using a service call.
The chain of information flows from the <code>path_planner</code> to the <code>path_manager</code>, <code>trajectory_follower</code>, <code>autopilot</code>, and finally on to the firmware.
You can see this in the <code>rqt_graph</code> image (by running <code>rqt_graph</code> in a new terminal):</p>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../images/roscopter_rqt.png" data-desc-position="bottom"><img alt="ROScopter RQT graph" src="../../images/roscopter_rqt.png"></a></p>
<h3 id="launch-ground-control-station">Launch Ground Control Station<a class="headerlink" href="#launch-ground-control-station" title="Permanent link">¶</a></h3>
<p>The ground control station will plot waypoints that we pass to ROScopter.
It can be helpful to launch this so we can see if ROScopter is actually doing what we want it to do.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># In a new terminal (source workspace first)</span>
ros2<span class="w"> </span>launch<span class="w"> </span>roscopter_gcs<span class="w"> </span>rosplane_gcs.launch.py
</code></pre></div>
<p>This will launch another instance of RViz that will display different information than the main simulation pane.</p>
<h2 id="loading-missions">Loading Missions<a class="headerlink" href="#loading-missions" title="Permanent link">¶</a></h2>
<p>ROScopter supports loading waypoint missions through waypoints defined in YAML files or set through ROS services.
These waypoints will be uploaded to the <code>path_planner</code> node using the <code>path_planner</code>'s ROS2 services.</p>
<h3 id="using-waypoint-files">Using Waypoint Files<a class="headerlink" href="#using-waypoint-files" title="Permanent link">¶</a></h3>
<p>Waypoints can be loaded in batch manner from a file.</p>
<p>Create or modify waypoint files:
</p><div class="highlight"><pre><span></span><code><span class="c1"># Edit the default waypoint file</span>
vim<span class="w"> </span>/path/to/rosflight_ws/src/roscopter/roscopter/params/multirotor_mission.yaml
</code></pre></div><p></p>
<p>Example waypoint file structure:
</p><div class="highlight"><pre><span></span><code><span class="c1"># WAYPOINTS</span>
<span class="nt">wp</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w">                   </span><span class="c1"># Waypoint type (0=hold, 1=go to)</span>
<span class="w">  </span><span class="nt">w</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-10.0</span><span class="p p-Indicator">]</span><span class="w">      </span><span class="c1"># Position [North, East, Down] in meters</span>
<span class="w">  </span><span class="nt">speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.0</span><span class="w">                </span><span class="c1"># Desired speed (m/s)</span>
<span class="w">  </span><span class="nt">psi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span><span class="w">                  </span><span class="c1"># Desired heading (radians)</span>
<span class="w">  </span><span class="nt">use_lla</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w">            </span><span class="c1"># Use NED coordinates (not GPS lat/lon/alt)</span>
<span class="nt">wp</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">w</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">20.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-10.0</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.0</span>
<span class="w">  </span><span class="nt">psi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">  </span><span class="nt">use_lla</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">wp</span><span class="p">:</span>
<span class="w">  </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w">                   </span><span class="c1"># "Hold" waypoint</span>
<span class="w">  </span><span class="nt">w</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">20.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-20.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">-20.0</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4.0</span>
<span class="w">  </span><span class="nt">psi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">  </span><span class="nt">use_lla</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">hold_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5.0</span><span class="w">         </span><span class="c1"># Hold for 5 seconds</span>
<span class="w">  </span><span class="nt">hold_indefinitely</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div><p></p>
<p><strong>Waypoint Parameters:</strong></p>
<ul>
<li><strong><code>type</code></strong>: Waypoint type (0 = hold, 1 = go to waypoint)</li>
<li><strong><code>w</code></strong>: Position coordinates <code>[North, East, Down]</code> (in meters NED frame or LLA)</li>
<li><strong><code>speed</code></strong>: Desired flight speed in m/s</li>
<li><strong><code>psi</code></strong>: Desired heading in radians</li>
<li><strong><code>use_lla</code></strong>: Set to <code>false</code> for NED coordinates, <code>true</code> for GPS coordinates</li>
<li><strong><code>hold_seconds</code></strong>: Time to hold at waypoint (0.0 = no hold)</li>
<li><strong><code>hold_indefinitely</code></strong>: If <code>true</code>, holds at waypoint until manual command</li>
</ul>
<p>Load waypoints from mission file using the service call:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Load waypoints from the default mission file</span>
<span class="nb">cd</span><span class="w"> </span>/path/to/rosflight_ws/src/roscopter/roscopter/params
ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/load_mission_from_file<span class="w"> </span>rosflight_msgs/srv/ParamFile<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">"{filename: </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">/multirotor_mission.yaml}"</span>
</code></pre></div>
<h3 id="setting-waypoints-manually">Setting Waypoints Manually<a class="headerlink" href="#setting-waypoints-manually" title="Permanent link">¶</a></h3>
<p>You can also add waypoints dynamically using the following services:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Add a single waypoint (North=5m, East=5m, Down=-4m, Yaw=0rad)</span>
ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/add_waypoint<span class="w"> </span>roscopter_msgs/srv/AddWaypoint<span class="w"> </span><span class="se">\</span>
<span class="w">  </span><span class="s2">"{wp: {w: [5.0, 5.0, -4.0], psi: 0.0}, publish_now: true}"</span>

<span class="c1"># Clear all current waypoints</span>
ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/clear_waypoints<span class="w"> </span>std_srvs/srv/Trigger
</code></pre></div>
<p>The structure of the <code>wp</code> field in the <code>roscopter_msgs/srv/AddWaypoint</code> service is the same as described above.
The structure of the service can be seen using:
</p><div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>roscopter_msgs/srv/AddWayoint
</code></pre></div>
which will output:
<div class="highlight"><pre><span></span><code>➜<span class="w">  </span>~<span class="w"> </span>ros2<span class="w"> </span>interface<span class="w"> </span>show<span class="w"> </span>roscopter_msgs/srv/AddWaypoint
<span class="c1"># Add a Waypoint to the waypoint list</span>

roscopter_msgs/Waypoint<span class="w"> </span>wp
<span class="w">    </span>uint8<span class="w"> </span><span class="nv">TYPE_HOLD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="w">    </span>uint8<span class="w"> </span><span class="nv">TYPE_GOTO</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span>
<span class="w">    </span>std_msgs/Header<span class="w"> </span>header
<span class="w">        </span>builtin_interfaces/Time<span class="w"> </span>stamp
<span class="w">            </span>int32<span class="w"> </span>sec
<span class="w">            </span>uint32<span class="w"> </span>nanosec
<span class="w">        </span>string<span class="w"> </span>frame_id
<span class="w">    </span>uint8<span class="w"> </span><span class="nb">type</span>
<span class="w">    </span>float32<span class="o">[</span><span class="m">3</span><span class="o">]</span><span class="w"> </span>w<span class="w">    </span><span class="c1">#</span>
<span class="w">    </span>float32<span class="w"> </span>speed<span class="w">   </span><span class="c1">#</span>
<span class="w">    </span>float32<span class="w"> </span>psi<span class="w">     </span><span class="c1">#</span>
<span class="w">    </span>float32<span class="w"> </span>hold_seconds
<span class="w">    </span>bool<span class="w"> </span>hold_indefinitely
<span class="w">    </span>bool<span class="w"> </span>use_lla
bool<span class="w"> </span>publish_now
---
bool<span class="w"> </span>success
string<span class="w"> </span>message
</code></pre></div><p></p>
<h3 id="verify-mission-loading">Verify Mission Loading<a class="headerlink" href="#verify-mission-loading" title="Permanent link">¶</a></h3>
<p>You can check that the waypoints are loaded by looking at the <code>roscopter_gcs</code> RViz GUI.
You should see something like:</p>
<p><a class="glightbox" data-type="image" data-width="auto" data-height="auto" href="../../images/roscopter_gcs.png" data-desc-position="bottom"><img alt="ROScopter GCS" src="../../images/roscopter_gcs.png"></a></p>
<h3 id="publishing-additional-waypoints">Publishing Additional Waypoints<a class="headerlink" href="#publishing-additional-waypoints" title="Permanent link">¶</a></h3>
<p>Note that the <code>path_planner</code> will publish only the first few waypoints (determined by the <code>num_waypoints_to_publish_at_start</code> parameter).
Publish the next one by calling:
</p><div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/path_planner/publish_next_waypoint<span class="w"> </span>std_srvs/srv/Trigger
</code></pre></div>
or by setting the parameter to the desired value:
<div class="highlight"><pre><span></span><code>ros2<span class="w"> </span>param<span class="w"> </span><span class="nb">set</span><span class="w"> </span>/path_planner<span class="w"> </span>num_waypoints_to_publish_at_start<span class="w"> </span><span class="m">100</span>
</code></pre></div><p></p>
<h2 id="enabling-autonomous-flight">Enabling Autonomous Flight<a class="headerlink" href="#enabling-autonomous-flight" title="Permanent link">¶</a></h2>
<p>After loading missions, enable autonomous flight through <code>rc</code>'s services.</p>
<h3 id="arm-and-start-mission">Arm and Start Mission<a class="headerlink" href="#arm-and-start-mission" title="Permanent link">¶</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Arm the vehicle (enable motors)</span>
ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/arm<span class="w"> </span>std_srvs/srv/Trigger

<span class="c1"># Turn off RC override -- make sure it is toggled off before arming</span>
ros2<span class="w"> </span>service<span class="w"> </span>call<span class="w"> </span>/toggle_override<span class="w"> </span>std_srvs/srv/Trigger
</code></pre></div>
<h3 id="monitor-flight-progress">Monitor Flight Progress<a class="headerlink" href="#monitor-flight-progress" title="Permanent link">¶</a></h3>
<p>Track autonomous flight status:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Monitor vehicle state during flight</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/estimated_state

<span class="c1"># Watch controller commands</span>
ros2<span class="w"> </span>topic<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>/controller_commands
</code></pre></div>
<h3 id="tuning-flight-performance">Tuning Flight Performance<a class="headerlink" href="#tuning-flight-performance" title="Permanent link">¶</a></h3>
<p>It is possible that the flight performance is unstable due to the <code>autopilot</code>'s gains not being set correctly.
See <a href="../tuning-performance-in-sim/">the tuning guide</a> for more information.</p>
<h2 id="review">Review<a class="headerlink" href="#review" title="Permanent link">¶</a></h2>
<p>You have successfully completed the ROScopter autonomous flight tutorial. You should now be able to:</p>
<ul>
<li><strong>Launch ROScopter Stack</strong>: Start the complete autonomy stack with estimator, controller, and path management</li>
<li><strong>Load Waypoint Missions</strong>: Create and load waypoint missions from YAML files or via ROS services</li>
<li><strong>Execute Autonomous Flight</strong>: Arm the vehicle and fly autonomous waypoint missions</li>
<li><strong>Monitor Flight Performance</strong>: Track vehicle state and controller performance during flight</li>
<li><strong>Understand System Architecture</strong>: Recognize how nodes communicate and data flows through the system</li>
</ul>
<h2 id="next-steps">Next Steps<a class="headerlink" href="#next-steps" title="Permanent link">¶</a></h2>
<p>Once you have ROScopter running autonomously, you can:</p>
<ol>
<li><strong><a href="../setting-up-rosplane-in-sim/">Fixed-Wing Autonomous Flight</a></strong>: Explore ROSplane for fixed-wing autonomous flight</li>
<li><strong><a href="../tuning-performance-in-sim/">Parameter/Gain Tuning</a></strong>: Use RQT plugins to tune PID controllers and optimize flight performance</li>
<li><strong><a href="../../../developer-guide/contribution-guidelines/">Custom Applications</a></strong>: Develop your own ROS2 nodes that interface with ROScopter</li>
</ol>
<h3 id="additional-resources">Additional Resources<a class="headerlink" href="#additional-resources" title="Permanent link">¶</a></h3>
<ul>
<li><a href="../../concepts/parameter-configuration/">ROSflight Parameter Reference</a>: Detailed firmware parameter descriptions</li>
<li><a href="../../concepts/hardware-setup/">Hardware Setup Guide</a>: Preparing real hardware for flight</li>
<li><a href="../../concepts/roscopter-overview/">ROScopter Architecture Documentation</a>: In-depth system design and implementation details</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2019-2025, BYU MAGICC Lab
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["content.action.edit", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>